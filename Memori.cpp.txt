#include <iostream>
#include <cstring>

using namespace std;

bool comparar(char*** id, char cad[], int c);
void imprimir(char*** list, int c);

int main()
{
    int n=2;
    char eleccion;
    char*** usuarios = new char**[n];

    while(eleccion!='*'){

        for (int j=n-1; j<n; j++){

            for(int i=j; i<=j; i++){
                usuarios[i] = new char*[6];
                usuarios[i][0] = new char[20];
                cout<<"Ingrese su cedula/ID: ";
                cin>>usuarios[i][0];

                if(n-1>1){

                    while (comparar(usuarios,usuarios[i][0],n)) {
                        cout<<"El usuario ya existe."<<endl;
                        cout<<"\n Ingresa una ID diferente."<<endl;
                        cout<<"\n Ingrese su cedula/ID: ";
                        cin>>usuarios[i][0];
                        cout<<endl;
                    }
                }
                usuarios[i][1] = new char[20];
                cout<<"Ingrese el nombre de la materia (separar con '_'): ";
                cin>>usuarios[i][1];
                cout<<endl;
                usuarios[i][2] = new char[20];
                cout<<"Ingrese su codigo (separar con '_'): ";
                cin>>usuarios[i][2];
                cout<<endl;
                usuarios[i][3] = new char[25];
                cout<<"Ingrese Horas clase (separar con '_'): ";
                cin>>usuarios[i][3];
                cout<<endl;
                usuarios[i][4] = new char[20];
                cout<<"Ingrese creditos: ";
                cin>>usuarios[i][4];
                cout<<endl;
                usuarios[i][5] = new char[20];
                cout<<"Ingrese Las horas personales de estudio: ";
                cin>>usuarios[i][5];
                cout<<endl;
            }
        }
        imprimir(usuarios,n);
        cout<<"\n El usuario ha sido agregado. Presiona cualquier tecla para agregar otro usuario\n o '*' para terminar: ";
        cin>>eleccion;
        if (eleccion=='*'){
            break;
        }
        /*else if(eleccion=='x'){
        continue;

    }*/
        cout<<endl;
        n++;
    }
    imprimir(usuarios,n);
    delete [] usuarios;

}

bool comparar(char*** id, char cad[], int c){
    for (int i = 1; i < c-1; i++){
        for(int j=0; j<20;j++){
            if (strcmp(id[i][0],cad)==0){
                return true;
            }
        }
    }
    return false;
}

void imprimir(char*** list, int c){
    cout<<"\n====================Usuarios agregados====================\n"<<endl;
    for (int i=1; i<c; i++){ //imprimir arreglo
        cout<<"["<<i<<"]"<<"  => ";
        for(int j=0; j<6; j++){
            for (int a=0; a<20; a++){
                if (list[i][j][a]=='\0'){
                    break;
                }
                else {
                    cout<<list[i][j][a];
                }
            }
            cout<<" ";
        }
        cout<<endl;
    }
    cout<<"\n==========================================================\n"<<endl;
}

